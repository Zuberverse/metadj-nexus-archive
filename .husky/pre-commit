# Pre-commit hook: Run quality checks before allowing commit
# Exits with non-zero status to abort commit if any check fails
#
# NOTE: Tests are intentionally excluded from pre-commit for faster commits.
# The full test suite (853 tests) runs during:
# - npm run prebuild (enforced before production builds)
# - CI/CD pipeline (GitHub Actions on push/PR)
# - Manual execution with `npm run test`
#
# This is a deliberate trade-off: fast local iteration vs. comprehensive CI validation.

echo "Running pre-commit quality checks..."

# Run lint-staged (ESLint --fix on staged files only, zero warnings enforced)
echo "Checking code style (ESLint via lint-staged)..."
npx lint-staged || exit 1

# Run type check (full project required for TypeScript resolution)
echo "Checking types (TypeScript)..."
npm run type-check || exit 1

echo "All pre-commit checks passed!"
